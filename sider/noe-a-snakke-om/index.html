<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
    <meta name="description" content="cfp : Et sted å samle resurser som hjelper en med å lage et CFP">

    <meta name="generator" content="Jekyll v3.8.5">
    <meta property="og:title" content="cfp">
    <meta property="og:locale" content="en_US">
    <meta name="description" content="Et sted å samle resurser som hjelper en med å lage et CFP">
    <meta property="og:description" content="Et sted å samle resurser som hjelper en med å lage et CFP">
    <link rel="canonical" href="https://bekk.github.io/cfp/">
    <meta property="og:url" content="https://bekk.github.io/cfp/">
    <meta property="og:site_name" content="cfp">
    <script type="application/ld+json">
        {
            "headline": "cfp",
            "@type": "WebSite",
            "url": "https://bekk.github.io/cfp/",
            "name": "cfp",
            "description": "Et sted å samle resurser som hjelper en med å lage et CFP",
            "@context": "https://schema.org"
        }
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/cfp/assets/css/style.css">
</head>

<body>
    <div class="container-lg px-3 my-5 markdown-body">

        <div class="container">

            <div id="warning">
                <h1>For å bruke CFP appen må du legge fra deg Janteloven</h1>
                <h3>Jeg bekrefter at</h3>
                <ul>
                    <li>Jeg tror jeg er noe.</li>
                    <li>Jeg tror jeg er like meget som dere.</li>
                    <li>Jeg tror jeg klokere enn dere (på enkelte ting).</li>
                    <li>Jeg tror jeg er bedre enn dere (på enkelte ting).</li>
                    <li>Jeg tror jeg vet mer enn dere (om enkelte ting).</li>
                    <li>Jeg tror jeg er mere enn dere (på enkelte områder).</li>
                    <li>Jeg tror jeg duger til noe.</li>
                    <li>Jeg tror dere bryr dere om meg og hva jeg har å si.</li>
                    <li>Jeg tror jeg kan lære dere noe</li>
                </ul>
                <button onclick="showWorkshop()" type="button">Bekreft</button>
            </div>
            <div id="workshop">
                <div>
                    <label>Jeg ønsker å dele
                        <select id="topic" onchange="update()">
                            <option value="none" selected> --Please choose an option-- </option>

                        </select>
                    </label>
                    <label>
                        <select id="format" onchange="update()">
                            <option value="none" selected>--Please choose an option--</option>

                        </select>
                    </label>
                </div>
                <div>
                    <h2>Steder du kan dele</h2>
                    <div id="arena-container"></div>


                </div>
                <div>
                    <h2>Tips til det du tenker å dele</h2>
                    <div id="tips-container"></div>

                </div>
            </div>
        </div>
    </div>
    <script>
        const warning = document.getElementById("warning")
        const workshop = document.getElementById("workshop")
        workshop.style.display = "none";

        function showWorkshop() {
            workshop.style.display = "block";
            warning.style.display = "none";
        }

        showWorkshop(); // Todo remove





        const topicSelect = document.getElementById("topic")
        const formatSelect = document.getElementById("format")
        const arenas = document.getElementsByClassName("arena")
        const tips = document.getElementsByClassName("tips")
        const arenaContainer = document.getElementById("arena-container")
        const tipsContainer = document.getElementById("tips-container")

        function update() {

            var selectedTopic = topicSelect.options[topicSelect.selectedIndex].value;
            var selectedFormat = formatSelect.options[formatSelect.selectedIndex].value;
            if (selectedTopic === "none" && selectedFormat === "none") {
                selectedTopic = ""
                selectedFormat = ""
            }
            for (var i = 0; i < arenas.length; i++) {
                var arena = arenas[i];
                var formatOptions = arena.getAttribute('data-format');
                var topicOptions = arena.getAttribute('data-topic');
                if (formatOptions.indexOf(selectedFormat) > -1 || topicOptions.indexOf(selectedTopic) > -1) {
                    arena.style.display = 'block'
                } else {
                    arena.style.display = 'none'
                }
            };

            for (var i = 0; i < tips.length; i++) {

                var tip = tips[i];
                var formatOptions = tip.getAttribute('data-format');
                var topicOptions = tip.getAttribute('data-topic');

                if (formatOptions.indexOf(selectedFormat) > -1 || topicOptions.indexOf(selectedTopic) > -1) {
                    tip.style.display = 'block'
                } else {
                    tip.style.display = 'none'
                }
            };
        }


        function addSelectOption(select, value, name) {
            var opt = document.createElement('option');
            opt.appendChild(document.createTextNode(name))
            opt.value = value
            select.appendChild(opt)
        }

        function addTopicSelectOption(topic) {
            addSelectOption(topicSelect, topic.id, topic.fields.Description)
        }

        function addFormatSelectOption(format) {
            addSelectOption(formatSelect, format.id, format.fields.Description)
        }



        function populateTopics(topics) {
            topics.map(topic => addTopicSelectOption(topic))
        }

        function populateFormat(topics) {
            topics.map(topic => addFormatSelectOption(topic))
        }

        function addArena(arena) {
            var div = document.createElement('div')
            div.classList.add("arena");
            div.setAttribute("data-topic", arena.fields.Topic || '')
            div.setAttribute("data-format", arena.fields.Format || '')
            div.appendChild(document.createTextNode(arena.fields.Description))
            arenaContainer.appendChild(div)

        }

        function populateArena(arenas) {
            arenas.map(arena => addArena(arena))
        }

        function addTips(tips) {
            var div = document.createElement('div')
            div.classList.add("tips");
            div.setAttribute("data-topic", tips.fields.Topic || '')
            div.setAttribute("data-format", tips.fields.Format || '')
            div.innerHTML = tips.fields.Description
            tipsContainer.appendChild(div)

        }

        function populateTips(tips) {
            tips.map(tip => addTips(tip))
        }

        fetch('https://api.airtable.com/v0/apptcQ5YDrneaRlPm/Topic', {
            method: 'get',
            headers: new Headers({
                'Authorization': 'Bearer keyZl2ED1jRXncibg'
            })
        }).then((response) => response.json()).then((json) => populateTopics(json.records));

        fetch('https://api.airtable.com/v0/apptcQ5YDrneaRlPm/Format', {
            method: 'get',
            headers: new Headers({
                'Authorization': 'Bearer keyZl2ED1jRXncibg'
            })
        }).then((response) => response.json()).then((json) => populateFormat(json.records));

        fetch('https://api.airtable.com/v0/apptcQ5YDrneaRlPm/Arena', {
            method: 'get',
            headers: new Headers({
                'Authorization': 'Bearer keyZl2ED1jRXncibg'
            })
        }).then((response) => response.json()).then((json) => populateArena(json.records));

        fetch('https://api.airtable.com/v0/apptcQ5YDrneaRlPm/Tips', {
            method: 'get',
            headers: new Headers({
                'Authorization': 'Bearer keyZl2ED1jRXncibg'
            })
        }).then((response) => response.json()).then((json) => populateTips(json.records));
    </script>
</body>

</html>